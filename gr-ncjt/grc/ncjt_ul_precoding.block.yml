id: ncjt_ul_precoding
label: UL Precoding
category: '[dMIMO]'

templates:
  imports: from gnuradio import ncjt
  make: ncjt.ul_precoding(${nss}, ${ntx}, ${ntx_gnb}, ${numltfsyms}, ${ndatasyms}, ${eigenmode}, ${wideband}, ${loadcsi}, ${csifile}, ${debug})

parameters:
  - id: nss
    label: Number of Streams
    dtype: int
    default: 2
    options: [ 1, 2, 3, 4, 5, 6, 7, 8 ]
    hide: part
  - id: ntx
    label: Number of UL Antennas
    dtype: int
    default: 2
    options: [2, 4, 6, 8 ]
    hide: part
  - id: ntx_gnb
    label: Number of gNB Antennas
    dtype: int
    default: 4
    options: [2, 4, 6, 8 ]
    hide: part
  - id: numltfsyms
    label: LTF Symbols
    dtype: int
    default: 0
  - id: ndatasyms
    label: Data Symbols
    dtype: int
  - id: eigenmode
    label: Eigen Mode Precoding
    dtype: bool
    default: 'False'
    options: [ 'True', 'False' ]
  - id: wideband
    label: Wideband Precoding
    dtype: bool
    default: 'False'
    options: [ 'True', 'False' ]
    hide: part
  - id: loadcsi
    label: Load Offline CSI
    dtype: bool
    default: 'False'
    options: [ 'True', 'False' ]
    hide: part
  - id: csifile
    label: Offline CSI Data
    dtype: file_open
    hide: part
  - id: debug
    label: Debug
    dtype: bool
    default: 'False'
    options: [ 'True', 'False' ]
    option_labels: [ Enable, Disable ]
    hide: part

inputs:
  - label: csi
    domain: message
    optional: true
  - label: in
    domain: stream
    dtype: complex
    multiplicity: ${nss}

outputs:
  - label: out
    domain: stream
    dtype: complex
    multiplicity: ${ntx}

file_format: 1
