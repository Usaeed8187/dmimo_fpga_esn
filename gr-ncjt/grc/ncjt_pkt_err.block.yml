id: ncjt_pkt_err
label: Pkt Err
category: '[dMIMO]'

templates:
  imports: from gnuradio import ncjt
  make: ncjt.pkt_err(${nstrms}, ${filename}, ${shortterm}, ${avgwindow}, ${logfreq}, ${logpkterr}, ${debug})

parameters:
  - id: nstrms
    label: Number of Streams
    dtype: int
    default: 1
    options: [ 1, 2, 3, 4, 5, 6, 7, 8 ]
    hide: part
  - id: filename
    label: Data File
    dtype: file_open
    hide: part
  - id: shortterm
    label: Short-term BER
    dtype: bool
    default: 'False'
    options: [ 'True', 'False' ]
    option_labels: [ Enable, Disable ]
    hide: part
  - id: avgwindow
    label: Avg. Window Size
    dtype: int
    default: 10
    hide: part
  - id: logfreq
    label: Log Frequency
    dtype: int
    default: 50
    hide: part
  - id: logpkterr
    label: Log Packet Error
    dtype: bool
    default: 'False'
    options: [ 'True', 'False' ]
    option_labels: [ Enable, Disable ]
    hide: part
  - id: debug
    label: Debug
    dtype: bool
    default: 'False'
    options: [ 'True', 'False' ]
    option_labels: [ Enable, Disable ]
    hide: part

inputs:
  - label: reset
    domain: message
    optional: true
  - domain: stream
    dtype: byte
    multiplicity: ${nstrms}

outputs:
  - label: ber
    domain: stream
    dtype: float
    multiplicity: "1"
  - label: pkterr
    domain: stream
    dtype: int
    vlen: ${nstrms}
    optional: true
    hide: ${not logpkterr}

asserts:
  - ${ nstrms >= 1 and nstrms <= 8}
  - ${ avgwindow > 0 }
  - ${ logfreq > 0 }

file_format: 1
